(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a43c6f8"],{"0c6d":function(e,t,s){"use strict";s("d3b7");var a=s("bc3a"),r=s.n(a),i=s("5c96"),n=s("4360"),o=s("7859"),l=s("a18c"),c=r.a.create({baseURL:"http://leju.bufan.cloud",timeout:5e3});c.interceptors.request.use((function(e){return Object(o["a"])()&&(e.headers["token"]=Object(o["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),c.interceptors.response.use((function(e){var t=e.data;return 20002===t.code&&(Object(o["c"])(),Object(o["d"])(),l["a"].push("/login")),2e4!==t.code?(Object(i["Message"])({message:t.message||"Error",type:"error",duration:5e3}),50008!==t.code&&50012!==t.code&&50014!==t.code||i["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){n["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(i["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=c},"1b62":function(e,t,s){"use strict";var a=s("7859");t["a"]={data:function(){return{paganationObj:{start:1,limit:6,totla:0,pageSizes:[3,6,9,12]},uploadFileOss:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",uploadFileOssSave:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOssSave"}},computed:{token:function(){return{token:Object(a["a"])()}}}}},"572f":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("el-card",{staticClass:"m-30",attrs:{shadow:"always"}},[s("div",{attrs:{slot:"header"},slot:"header"}),s("el-form",{ref:"findUserListForm",attrs:{model:e.findUserList,"label-width":"80px",size:"normal"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6,offset:0}},[s("el-form-item",{attrs:{label:"昵称"}},[s("el-input",{attrs:{placeholder:"请输入昵称",size:"mini"},model:{value:e.findUserList.nickName,callback:function(t){e.$set(e.findUserList,"nickName",t)},expression:"findUserList.nickName"}})],1)],1),s("el-col",{attrs:{span:6,offset:0}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{attrs:{placeholder:"请输入用户名",size:"mini"},model:{value:e.findUserList.roleIds,callback:function(t){e.$set(e.findUserList,"roleIds",t)},expression:"findUserList.roleIds"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6,offset:18}},[s("el-button",{attrs:{type:"default",size:"mini"},on:{click:e.clear}},[e._v("重置")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sear}},[e._v("搜索")])],1)],1)],1)],1),s("el-card",{attrs:{shadow:"always"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.isAddDia}},[e._v("新增")])],1),s("el-table",{attrs:{data:e.userList,border:"",stripe:""}},[s("el-table-column",{attrs:{label:"#",align:"center",type:"index"}}),s("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center"}}),s("el-table-column",{attrs:{prop:"nick_name",label:"昵称",align:"center"}}),s("el-table-column",{attrs:{label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.salt,alt:""}})]}}])}),s("el-table-column",{attrs:{prop:"roles",label:"角色",align:"center"}}),s("el-table-column",{attrs:{prop:"create_time",label:"添加时间",align:"center"}}),s("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(s){return e.edit(t.row.id)}}}),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(s){return e.del(t.row.id)}}})]}}])})],1),s("el-pagination",{staticStyle:{"text-align":"left","margin-top":"20px"},attrs:{"current-page":e.start,"page-sizes":[10,20,30,40],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),s("el-dialog",{attrs:{title:"编辑用户",visible:e.isShow,width:"30%"},on:{"update:visible":function(t){e.isShow=t},close:e.close}},[s("el-form",{ref:"addUserListForm",attrs:{model:e.addUserList,"label-width":"80px",size:"normal"}},[s("el-form-item",{attrs:{label:"用户名:"}},[s("el-input",{attrs:{size:"mini"},model:{value:e.addUserList.username,callback:function(t){e.$set(e.addUserList,"username",t)},expression:"addUserList.username"}})],1),s("el-form-item",{attrs:{label:"用户昵称"}},[s("el-input",{attrs:{size:"mini"},model:{value:e.addUserList.nickName,callback:function(t){e.$set(e.addUserList,"nickName",t)},expression:"addUserList.nickName"}})],1),e.isPass?s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{size:"mini",type:"password"},model:{value:e.addUserList.password,callback:function(t){e.$set(e.addUserList,"password",t)},expression:"addUserList.password"}})],1):e._e(),s("el-form-item",{attrs:{label:"用户头像"}},[s("el-upload",{ref:"imUpload",attrs:{action:e.uploadFileOss,headers:e.token,"on-success":e.upSuccess}},[e.addUserList.salt?s("img",{staticClass:"avatar",staticStyle:{width:"100px",height:"100px","border-radius":"150%"},attrs:{src:e.addUserList.salt}}):s("i",{staticClass:"el-icon-user-solid",staticStyle:{width:"40px","font-size":"20px","line-height":"40px","border-radius":"50%",background:"#c0c4cc",color:"#fff"}})])],1),s("el-form-item",{attrs:{label:"用户角色"}},[s("el-select",{attrs:{multiple:"",placeholder:"选择用户角色",clearable:"",filterable:""},model:{value:e.addUserList.roleIds,callback:function(t){e.$set(e.addUserList,"roleIds",t)},expression:"addUserList.roleIds"}},e._l(e.rolesList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),1)],1)],1),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.isShow=!1}}},[e._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确定")])],1)],1)],1)},r=[],i=s("c7eb"),n=s("1da1"),o=(s("99af"),s("0c6d"));function l(e,t,s){return Object(o["a"])({url:"/admin/sysAuth/user/findUsersByPage/".concat(e,"/").concat(t),method:"post",data:s})}function c(){return Object(o["a"])({url:"/admin/sysAuth/role/findAllRoles"})}function u(e){return Object(o["a"])({url:"/admin/sysAuth/user/removeUser/".concat(e),method:"DELETE"})}function d(e){return Object(o["a"])({url:"/admin/sysAuth/user/saveUserRoles",method:"post",data:e})}function m(e){return Object(o["a"])({url:"/admin/sysAuth/user/".concat(e)})}function p(e){return Object(o["a"])({url:"/admin/sysAuth/user/updateUserRoles",method:"PUT",data:e})}var f=s("1b62"),h={name:"User",mixins:[f["a"]],data:function(){return{start:1,limit:10,total:0,userList:[],findUserList:{},rolesList:[],isShow:!1,addUserList:{salt:"",roleIds:[]},isPass:1}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var s,a,r,n,o;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:return s=t.sent,s.success?e.rolesList=s.data.items:e.$message.error(s.message),t.next=6,l(e.start,e.limit);case 6:a=t.sent,r=a.success,n=a.data,o=a.message,r?(e.total=n.total,e.userList=n.rows):e.$message.error(o);case 9:case"end":return t.stop()}}),t)})))()},clear:function(){this.finUserList={}},sear:function(){this.$message.warning("功能开发中")},del:function(e){var t=this;return Object(n["a"])(Object(i["a"])().mark((function s(){var a,r,n;return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,u(e);case 2:a=s.sent,r=a.success,n=a.message,r?(t.$message.success("删除成功"),t.getUserList()):t.$message.error(n);case 5:case"end":return s.stop()}}),s)})))()},edit:function(e){var t=this;return Object(n["a"])(Object(i["a"])().mark((function s(){var a,r,n,o;return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,m(e);case 2:a=s.sent,r=a.success,n=a.message,o=a.data,r?(t.isPass=0,t.isShow=!0,t.addUserList=o.user):t.$message.error(n);case 5:case"end":return s.stop()}}),s)})))()},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.limit=e,this.getUserList()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.start=e,this.getUserList()},close:function(){this.isShow=!1},add:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var s,a,r,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=null,s=e.isPass?d:p,t.next=4,s(e.addUserList);case 4:a=t.sent,r=a.success,n=a.message,r?(e.$message.success("成功"),e.isPass=0,e.isShow=!1,e.getUserList()):e.$message.error(n);case 7:case"end":return t.stop()}}),t)})))()},upSuccess:function(e){e.success?this.addUserList.salt=e.data.fileUrl:this.$message.error(e.message)},isAddDia:function(){this.isPass=1,this.isShow=!0,this.addUserList=this.$options.data().addUserList}}},b=h,g=s("2877"),w=Object(g["a"])(b,a,r,!1,null,"36c9cf3c",null);t["default"]=w.exports}}]);