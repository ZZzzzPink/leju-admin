(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3347cc86"],{"0c6d":function(e,t,a){"use strict";a("d3b7");var n=a("bc3a"),r=a.n(n),s=a("5c96"),i=a("4360"),o=a("7859"),l=a("a18c"),c=r.a.create({baseURL:"http://leju.bufan.cloud",timeout:5e3});c.interceptors.request.use((function(e){return Object(o["a"])()&&(e.headers["token"]=Object(o["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),c.interceptors.response.use((function(e){var t=e.data;return 20002===t.code&&(Object(o["c"])(),Object(o["d"])(),l["a"].push("/login")),2e4!==t.code?(Object(s["Message"])({message:t.message||"Error",type:"error",duration:5e3}),50008!==t.code&&50012!==t.code&&50014!==t.code||s["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){i["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(s["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=c},"0ccb":function(e,t,a){var n=a("50c4"),r=a("1148"),s=a("1d80"),i=Math.ceil,o=function(e){return function(t,a,o){var l,c,d=String(s(t)),u=d.length,m=void 0===o?" ":String(o),p=n(a);return p<=u||""==m?d:(l=p-u,c=r.call(m,i(l/m.length)),c.length>l&&(c=c.slice(0,l)),e?d+c:c+d)}};e.exports={start:o(!1),end:o(!0)}},1148:function(e,t,a){"use strict";var n=a("a691"),r=a("1d80");e.exports="".repeat||function(e){var t=String(r(this)),a="",s=n(e);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(a+=t);return a}},"1b62":function(e,t,a){"use strict";var n=a("7859");t["a"]={data:function(){return{paganationObj:{start:1,limit:6,totla:0,pageSizes:[3,6,9,12]},uploadFileOss:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",uploadFileOssSave:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOssSave"}},computed:{token:function(){return{token:Object(n["a"])()}}}}},"4d90":function(e,t,a){"use strict";var n=a("23e7"),r=a("0ccb").start,s=a("9a0c");n({target:"String",proto:!0,forced:s},{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"68c9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("el-card",{attrs:{shadow:"always"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addRec}},[e._v("新增")])],1),a("el-table",{attrs:{border:"",stripe:"",data:e.recommendList}},[a("el-table-column",{attrs:{type:"index",label:"#",align:"center"}}),a("el-table-column",{attrs:{label:"商品图片",align:"center",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.pic,alt:""},on:{error:function(e){e.target.src="https://sitechecker.pro/wp-content/uploads/2019/11/sitechecker-404.png"}}})]}}])}),a("el-table-column",{attrs:{align:"center",width:"300px",label:"活动日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("开始时间:"+e._s(t.row.promotionStartTime))]),a("div",[e._v("结束时间"+e._s(t.row.promotionEndTime))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"是否过期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("isPass")(t.row.promotionEndTime))+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"name",width:"200px",label:"商品名称"}}),a("el-table-column",{attrs:{align:"center",prop:"brandName",width:"200px",label:"品牌名称"}}),a("el-table-column",{attrs:{align:"center",prop:"price",width:"100px",label:"商品价值"}}),a("el-table-column",{attrs:{width:"100px",align:"center",prop:"productCategoryName",label:"商品类别"}}),a("el-table-column",{attrs:{width:"200px",align:"center",prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"red","font-size":"12px"},on:{click:function(a){return e.del(t.row.recommendId)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"热销详情",visible:e.dialogVisible,width:"80%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-card",{staticClass:"m-30",attrs:{shadow:"none"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("条件查询")])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4,offset:0}},[a("el-input",{attrs:{placeholder:"商品名称/模糊查询",size:"mini",clearable:""},model:{value:e.findRecommendList.name,callback:function(t){e.$set(e.findRecommendList,"name",t)},expression:"findRecommendList.name"}})],1),a("el-col",{attrs:{span:4,offset:0}},[a("el-input",{attrs:{placeholder:"商品货号",size:"mini",clearable:""},model:{value:e.findRecommendList.productSn,callback:function(t){e.$set(e.findRecommendList,"productSn",t)},expression:"findRecommendList.productSn"}})],1),a("el-col",{attrs:{span:4,offset:0}},[a("el-select",{attrs:{size:"mini",placeholder:"品牌"},model:{value:e.findRecommendList.brandId,callback:function(t){e.$set(e.findRecommendList,"brandId",t)},expression:"findRecommendList.brandId"}},e._l(e.brandList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{attrs:{span:4,offset:0}},[a("el-select",{attrs:{size:"mini",placeholder:"上架状态"},model:{value:e.findRecommendList.publishStatus,callback:function(t){e.$set(e.findRecommendList,"publishStatus",t)},expression:"findRecommendList.publishStatus"}},[a("el-option",{attrs:{label:"上架",value:1}}),a("el-option",{attrs:{label:"未上架",value:0}})],1)],1),a("el-col",{attrs:{span:4,offset:0}},[a("el-select",{attrs:{size:"mini",placeholder:"审核状态"},model:{value:e.findRecommendList.verifyStatus,callback:function(t){e.$set(e.findRecommendList,"verifyStatus",t)},expression:"findRecommendList.verifyStatus"}},[a("el-option",{attrs:{label:"审核",value:1}}),a("el-option",{attrs:{label:"未审核",value:0}})],1)],1),a("el-col",{attrs:{span:4,offset:0}},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.findRecommendList={}}}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getOrFindAddRec}},[e._v("搜索")])],1)],1)],1),a("el-card",{staticClass:"m-30",attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("商品列表")])]),a("el-table",{attrs:{height:"505",data:e.hotList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"#"}}),a("el-table-column",{attrs:{align:"center",label:"选择"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id},on:{change:function(a){return e.findProduct(t.row.id)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(""))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.pic,fit:"fill",lazy:!0}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" "),a("br"),e._v(" 品牌:"+e._s(t.row.brandName)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"商品价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 原价:"+e._s(t.row.originalPrice)+" "),a("br"),e._v(" 现价:"+e._s(t.row.price)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"productCategoryName",label:"商品类别"}}),a("el-table-column",{attrs:{align:"center",prop:"weight",label:"重量"}})],1),a("el-pagination",{staticStyle:{"text-align":"left","margin-top":"20px"},attrs:{"current-page":e.start,"page-sizes":[10,20,30,40],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{width:"50%",title:"编辑限时活动",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-form",{ref:"addRecListForm",attrs:{model:e.addRecList,"label-width":"100px",size:"normal"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"商品原价"}},[a("span",[e._v(e._s(e.productDetailList.price))])])],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("span",[e._v(e._s(e.productDetailList.name))])])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"促销价格"}},[a("el-input-number",{attrs:{size:"mini",min:1,max:10,label:"描述文字"},model:{value:e.addRecList.promotionPrice,callback:function(t){e.$set(e.addRecList,"promotionPrice",t)},expression:"addRecList.promotionPrice"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input-number",{attrs:{size:"mini",min:1,max:10,label:"描述文字"},model:{value:e.addRecList.sort,callback:function(t){e.$set(e.addRecList,"sort",t)},expression:"addRecList.sort"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{staticClass:"myInput",attrs:{size:"mini",type:"datetime",placeholder:"开始时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.addRecList.promotionStartTime,callback:function(t){e.$set(e.addRecList,"promotionStartTime",t)},expression:"addRecList.promotionStartTime"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{staticClass:"myInput",attrs:{size:"mini",type:"datetime",placeholder:"开始时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.addRecList.promotionEndTime,callback:function(t){e.$set(e.addRecList,"promotionEndTime",t)},expression:"addRecList.promotionEndTime"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"活动限购数量"}},[a("el-input",{attrs:{placeholder:"活动限购数量",size:"nimi",clearable:""},model:{value:e.addRecList.promotionPerLimit,callback:function(t){e.$set(e.addRecList,"promotionPerLimit",t)},expression:"addRecList.promotionPerLimit "}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"商品图片"}},[a("el-upload",{attrs:{action:e.uploadFileOss,headers:e.token}},[e.addRecList.pic?a("img",{staticClass:"avatar",staticStyle:{width:"100px"},attrs:{src:e.addRecList.pic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.innerVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.doAdd}},[e._v("确 定")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)],1)],1)},r=[],s=a("c7eb"),i=a("1da1"),o=a("1b62"),l=a("ed08"),c=(a("99af"),a("0c6d"));function d(){return Object(c["a"])({url:"/lejuAdmin/homeRecommend/findAllRecommends"})}function u(e){return Object(c["a"])({url:"/lejuAdmin/homeRecommend/delRecommend/".concat(e),method:"DELETE"})}function m(e,t,a){return Object(c["a"])({url:"/lejuAdmin/product/productsByPage/".concat(e,"/").concat(t),method:"post",data:a})}function p(){return Object(c["a"])({url:"/lejuAdmin/brand/findAllBrand"})}function f(e){return Object(c["a"])({url:"/lejuAdmin/product/productSkusDetail/".concat(e)})}function b(e){return Object(c["a"])({url:"/lejuAdmin/homeRecommend/addRecommend",method:"post",data:e})}var g={name:"Recommend",mixins:[o["a"]],data:function(){return{recommendList:[],dialogVisible:!1,innerVisible:!1,findRecommendList:{},hotList:[],brandList:[],productDetailList:[],addRecList:{sort:0,promotionPrice:0},radio:"",start:1,limit:10,total:0}},created:function(){this.getAllRecommends()},methods:{getAllRecommends:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var a,n,r,i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:a=t.sent,console.log("%c [ res ]-25","font-size:13px; background:pink; color:#bf2c9f;",a),n=a.success,r=a.message,i=a.data,n?(e.recommendList=i.items,console.log("%c [ this.recommendList ]-29","font-size:13px; background:pink; color:#bf2c9f;",e.recommendList)):e.$message.error(r);case 6:case"end":return t.stop()}}),t)})))()},addRec:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.dialogVisible=!0,e.getOrFindAddRec(),e.getBrand();case 3:case"end":return t.stop()}}),t)})))()},handleClose:function(){this.dialogVisible=!1},getOrFindAddRec:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var a,n,r,i,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(l["a"])(e.findRecommendList),console.log(a),t.next=4,m(e.start,e.limit,a);case 4:n=t.sent,r=n.success,i=n.message,o=n.data,r?(e.hotList=o.rows,e.total=o.total,e.findRecommendList={}):e.$message.error(i);case 7:case"end":return t.stop()}}),t)})))()},getBrand:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var a,n,r,i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:a=t.sent,n=a.success,r=a.message,i=a.data,n?e.brandList=i.items:e.$message.error(r);case 5:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.limit=e,this.getOrFindAddRec()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.start=e,this.getOrFindAddRec()},findProduct:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){var n,r,i,o;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f(e);case 2:n=a.sent,r=n.success,i=n.message,o=n.data,r?(t.productDetailList=o.product,t.addRecList.pic=o.product.pic,t.addRecList.productId=e,t.innerVisible=!0):t.$message.error(i);case 5:case"end":return a.stop()}}),a)})))()},doAdd:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var a,n,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b(e.addRecList);case 2:a=t.sent,n=a.success,r=a.message,n?(e.$message.success("成功"),e.innerVisible=!1,e.addRecList={}):e.$message.error(r);case 5:case"end":return t.stop()}}),t)})))()},del:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){var n,r,i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,u(e);case 2:n=a.sent,r=n.success,i=n.message,r?(t.$message.success("成功"),t.getAllRecommends()):(t.$message.error(i),t.getAllRecommends());case 5:case"end":return a.stop()}}),a)})))()}},filters:{isPass:function(e){e||(e=0);var t=(new Date).getTime()-new Date(e).getTime();return t>0?"过期":"未过期"}}},h=g,v=a("2877"),w=Object(v["a"])(h,n,r,!1,null,"710c22a3",null);t["default"]=w.exports},"9a0c":function(e,t,a){var n=a("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},ed08:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("53ca"),a("ac1f"),a("00b4"),a("5319"),a("4d63"),a("2c3e"),a("25f0"),a("d3b7"),a("4d90"),a("159b");function n(e){var t={};for(var a in e)(e[a]||0==e[a])&&(t[a]=e[a]);return t}}}]);