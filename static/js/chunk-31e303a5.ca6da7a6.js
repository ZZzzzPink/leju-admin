(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31e303a5"],{"0c6d":function(t,e,a){"use strict";a("d3b7");var s=a("bc3a"),o=a.n(s),i=a("5c96"),r=a("4360"),n=a("7859"),l=a("a18c"),c=o.a.create({baseURL:"http://leju.bufan.cloud",timeout:5e3});c.interceptors.request.use((function(t){return Object(n["a"])()&&(t.headers["token"]=Object(n["a"])()),t}),(function(t){return console.log(t),Promise.reject(t)})),c.interceptors.response.use((function(t){var e=t.data;return 20002===e.code&&(Object(n["c"])(),Object(n["d"])(),l["a"].push("/login")),2e4!==e.code?(Object(i["Message"])({message:e.message||"Error",type:"error",duration:5e3}),50008!==e.code&&50012!==e.code&&50014!==e.code||i["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){r["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){return console.log("err"+t),Object(i["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=c},"1b62":function(t,e,a){"use strict";var s=a("7859");e["a"]={data:function(){return{paganationObj:{start:1,limit:6,totla:0,pageSizes:[3,6,9,12]},uploadFileOss:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",uploadFileOssSave:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOssSave"}},computed:{token:function(){return{token:Object(s["a"])()}}}}},e1b9:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("el-card",{staticClass:"m-30",attrs:{shadow:"always"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addBrand}},[t._v("新增")])],1),a("el-table",{attrs:{data:t.brandList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#",align:"center",fixed:""}}),a("el-table-column",{attrs:{width:"200px",prop:"name",label:"品牌名称",align:"center"}}),a("el-table-column",{attrs:{width:"200px",align:"center",label:"展示状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" 是否展示:"),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.isShow(e.row.id,e.row.showStatus)}},model:{value:e.row.showStatus,callback:function(a){t.$set(e.row,"showStatus",a)},expression:"scope.row.showStatus"}})]}}])}),a("el-table-column",{attrs:{label:"logo",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.logo,fit:"fill"}})]}}])}),a("el-table-column",{attrs:{label:"专区大图",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.bigPic,fit:"fill"}})]}}])}),a("el-table-column",{attrs:{label:"品牌故事",prop:"brandStory",width:"200px",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间",width:"200px",prop:"createTime",align:"center"}}),a("el-table-column",{attrs:{label:"排序",prop:"sort",align:"center"}}),a("el-table-column",{attrs:{label:"产品评论数量",prop:"productCommentCount",width:"200px",align:"center"}}),a("el-table-column",{attrs:{label:"产品数量",prop:"productCount",align:"center"}}),a("el-table-column",{attrs:{label:"是否品牌制造商",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.factoryStatus?"是":"不是")+" ")]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-size":"12px",color:"#409eff"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),a("span",{staticStyle:{"font-size":"12px","margin-left":"5px",color:"red"},on:{click:function(a){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"品牌详情",visible:t.dialogVisible,width:"60%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"isShowEditForm",attrs:{model:t.isShowEdit,"label-width":"130px",size:"normal"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"品牌名称"}},[a("el-input",{model:{value:t.isShowEdit.name,callback:function(e){t.$set(t.isShowEdit,"name",e)},expression:"isShowEdit.name"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"首字母"}},[a("el-input",{model:{value:t.isShowEdit.firstLetter,callback:function(e){t.$set(t.isShowEdit,"firstLetter",e)},expression:"isShowEdit.firstLetter"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:t.isShowEdit.sort,callback:function(e){t.$set(t.isShowEdit,"sort",e)},expression:"isShowEdit.sort"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"产品数量"}},[a("el-input",{model:{value:t.isShowEdit.productCount,callback:function(e){t.$set(t.isShowEdit,"productCount",e)},expression:"isShowEdit.productCount"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"产品故事"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.isShowEdit.brandStory,callback:function(e){t.$set(t.isShowEdit,"brandStory",e)},expression:"isShowEdit.brandStory "}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"是否展示"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.isShowEdit.showStatus,callback:function(e){t.$set(t.isShowEdit,"showStatus",e)},expression:"isShowEdit.showStatus"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"是否为品牌制造商"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.isShowEdit.factoryStatus,callback:function(e){t.$set(t.isShowEdit,"factoryStatus",e)},expression:"isShowEdit.factoryStatus"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{staticStyle:{width:"100%",height:"100%"},attrs:{label:"上传专区大图"}},[a("el-upload",{ref:"upload",attrs:{action:t.uploadFileOss,headers:t.token,"on-success":t.handlePicSuccess,"before-upload":t.beforePicUpload}},[t.isShowEdit.bigPic?a("el-image",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.isShowEdit.bigPic,fit:"fill",lazy:!0}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"100px",height:"100px","line-height":"100px","font-size":"28px"}})],1)],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"上传logo"}},[a("el-upload",{ref:"upload",attrs:{action:t.uploadFileOss,headers:t.token,"on-success":t.LogoHandlePicSuccess,"before-upload":t.LogoBeforePicUpload}},[t.isShowEdit.logo?a("el-image",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.isShowEdit.logo,fit:"fill",lazy:!0}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"100px",height:"100px","line-height":"100px","font-size":"28px"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.doUpload}},[t._v("确 定")])],1)],1),a("el-pagination",{staticStyle:{"text-align":"left","margin-top":"20px"},attrs:{"current-page":t.start,"page-sizes":[10,20,30,40],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},o=[],i=a("c7eb"),r=a("1da1"),n=(a("99af"),a("0c6d"));function l(t,e){return Object(n["a"])({url:"lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e)})}function c(t){return Object(n["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/lejuAdmin/brand/delBrand/".concat(t),method:"DELETE"})}function d(t){return Object(n["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}var f=a("1b62"),h={name:"Brand",mixins:[f["a"]],data:function(){return{start:1,limit:10,total:0,addOrEdit:0,brandList:[],dialogVisible:!1,isShowEdit:{bigPic:"",logo:""}}},created:function(){this.getBrandList()},methods:{getBrandList:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){var a,s,o,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l(t.start,t.limit);case 2:a=e.sent,s=a.success,o=a.message,r=a.data,s?(t.brandList=r.rows,t.total=r.total):t.$message.error(o);case 5:case"end":return e.stop()}}),e)})))()},isShow:function(t,e){var a=this;return Object(r["a"])(Object(i["a"])().mark((function s(){var o,r,n;return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,c({id:t,status:e});case 2:o=s.sent,r=o.success,n=o.message,r?(a.$message.success("更改成功"),a.getBrandList()):a.$message.error(n);case 5:case"end":return s.stop()}}),s)})))()},del:function(t){var e=this;return Object(r["a"])(Object(i["a"])().mark((function a(){var s,o,r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,u(t);case 2:s=a.sent,o=s.success,r=s.message,o?(e.$message.success("成功"),e.getBrandList()):e.$message.error(r);case 5:case"end":return a.stop()}}),a)})))()},addBrand:function(){this.dialogVisible=!0},edit:function(t){this.dialogVisible=!0,this.addOrEdit=1,this.dialogVisible&&(this.isShowEdit=t)},handlePicSuccess:function(t){var e=t.success,a=t.message,s=t.data;e?this.isShowEdit.bigPic=s.fileUrl:this.$message.error(a)},beforePicUpload:function(t){},LogoHandlePicSuccess:function(t){var e=t.success,a=t.message,s=t.data;e?this.isShowEdit.logo=s.fileUrl:this.$message.error(a)},LogoBeforePicUpload:function(t){console.log("%c [ Lbe ]-299","font-size:13px; background:pink; color:#bf2c9f;",t)},doUpload:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){var a,s,o,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.isShowEdit),a=null,a=t.addOrEdit?p:d,console.log(a),e.next=6,a(t.isShowEdit);case 6:s=e.sent,o=s.success,r=s.message,o?(t.$message.success("成功"),t.dialogVisible=!1,t.getBrandList()):(t.$message.error(r),t.dialogVisible=!1,t.getBrandList());case 9:case"end":return e.stop()}}),e)})))()},handleClose:function(){this.dialogVisible=!1},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.limit=t,this.getBrandList()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.start=t,this.getBrandList()}}},g=h,b=a("2877"),m=Object(b["a"])(g,s,o,!1,null,"02ca1570",null);e["default"]=m.exports}}]);