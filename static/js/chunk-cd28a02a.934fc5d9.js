(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd28a02a"],{"0c6d":function(e,t,s){"use strict";s("d3b7");var r=s("bc3a"),a=s.n(r),n=s("5c96"),o=s("4360"),i=s("7859"),c=s("a18c"),l=a.a.create({baseURL:"http://leju.bufan.cloud",timeout:5e3});l.interceptors.request.use((function(e){return Object(i["a"])()&&(e.headers["token"]=Object(i["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),l.interceptors.response.use((function(e){var t=e.data;return 20002===t.code&&(Object(i["c"])(),Object(i["d"])(),c["a"].push("/login")),2e4!==t.code?(Object(n["Message"])({message:t.message||"Error",type:"error",duration:5e3}),50008!==t.code&&50012!==t.code&&50014!==t.code||n["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){o["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(n["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=l},2067:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("el-card",{staticClass:"m-30",attrs:{shadow:"always"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showDia}},[e._v("新增")])],1),s("el-table",{attrs:{data:e.addressList}},[s("el-table-column",{attrs:{fixed:"left",type:"index",align:"center",label:"序号",width:"50"}}),s("el-table-column",{attrs:{align:"center",label:"地址名称",prop:"addressName"}}),s("el-table-column",{attrs:{align:"center",label:"默认发货地址",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 默认发货地址:"),s("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(s){return e.setS(t.row.id,t.row.sendStatus)}},model:{value:t.row.sendStatus,callback:function(s){e.$set(t.row,"sendStatus",s)},expression:"scope.row.sendStatus"}})]}}])}),s("el-table-column",{attrs:{align:"center",label:"收货人姓名",prop:"name",width:"200"}}),s("el-table-column",{attrs:{align:"center",label:"收货人电话",prop:"phone",width:"200"}}),s("el-table-column",{attrs:{align:"center",label:"收货人地址",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[e._v(" "+e._s(t.row.province)+e._s(t.row.city)+e._s(t.row.region)+" ")])]}}])}),s("el-table-column",{attrs:{align:"center",label:"默认收货地址",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 默认收货地址:"),s("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(s){return e.sentR(t.row.id,t.row.receiveStatus)}},model:{value:t.row.receiveStatus,callback:function(s){e.$set(t.row,"receiveStatus",s)},expression:"scope.row.receiveStatus"}})]}}])}),s("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createTime",width:"200"}}),s("el-table-column",{attrs:{fixed:"right",align:"center",label:"创建时间",prop:"createTime",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-view"},on:{click:function(s){return e.EditorAddress(t.row.id)}}},[e._v("编辑")]),s("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(s){return e.open(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),s("AddressDialog",{ref:"addressDialog",on:{"refresh-data":e.getAddressList}})],1)},a=[],n=s("c7eb"),o=s("1da1"),i=s("0c6d");function c(){return Object(i["a"])({url:"/lejuAdmin/companyAddress/addressList"})}function l(e){return Object(i["a"])({url:"/lejuAdmin/companyAddress/setReceiveOne",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/lejuAdmin/companyAddress/setSendOne",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/lejuAdmin/companyAddress/".concat(e),method:"delete"})}function p(e){return Object(i["a"])({url:"/lejuAdmin/companyAddress/save",method:"post",data:e})}function m(e){return Object(i["a"])({url:"/lejuAdmin/companyAddress/update",method:"post",data:e})}function f(e){return Object(i["a"])({url:"/lejuAdmin/companyAddress/".concat(e)})}var h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("el-dialog",{attrs:{title:e.addressId?"编辑地址":"新增地址",visible:e.isShowDialog,"before-close":e.handleClose,width:"60%"},on:{"update:visible":function(t){e.isShowDialog=t},close:e.closeDialog}},[s("el-form",{ref:"addressForm",attrs:{model:e.adderssList,"label-width":"110px",size:"normal",rules:e.rules}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12,offset:0}},[s("el-form-item",{attrs:{prop:"addressName",label:"地址名称",size:"normal"}},[s("el-input",{attrs:{placeholder:"请输入地址名称",size:"normal",clearable:""},model:{value:e.adderssList.addressName,callback:function(t){e.$set(e.adderssList,"addressName",t)},expression:"adderssList.addressName"}})],1)],1),s("el-col",{attrs:{span:12,offset:0}},[s("el-form-item",{attrs:{prop:"name",label:"收货人姓名",size:"normal"}},[s("el-input",{attrs:{placeholder:"请输入收货人姓名",size:"normal",clearable:""},model:{value:e.adderssList.name,callback:function(t){e.$set(e.adderssList,"name",t)},expression:"adderssList.name"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12,offset:0}},[s("el-form-item",{attrs:{prop:"phone",label:"收货人手机号",size:"normal"}},[s("el-input",{attrs:{placeholder:"请输入手机号",size:"normal",clearable:""},model:{value:e.adderssList.phone,callback:function(t){e.$set(e.adderssList,"phone",t)},expression:"adderssList.phone"}})],1)],1),s("el-col",{attrs:{span:12,offset:0}},[s("el-form-item",{attrs:{prop:"postCode",label:"邮政编码",size:"normal"}},[s("el-input",{attrs:{placeholder:"请输入邮政编码",size:"normal",clearable:""},model:{value:e.adderssList.postCode,callback:function(t){e.$set(e.adderssList,"postCode",t)},expression:"adderssList.postCode"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12,offset:0}},[s("el-form-item",{attrs:{prop:"selectedOptions",label:"收货地址",size:"normal"}},[s("el-cascader",{attrs:{options:e.options},on:{change:e.handleCityChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)],1),s("el-col",{attrs:{span:12,offset:0}},[s("el-form-item",{attrs:{prop:"detailAddress",label:"详细地址",size:"normal"}},[s("el-input",{attrs:{placeholder:"请输入详细地址",size:"normal",clearable:""},model:{value:e.adderssList.detailAddress,callback:function(t){e.$set(e.adderssList,"detailAddress",t)},expression:"adderssList.detailAddress"}})],1)],1)],1)],1),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.hideOrSub(0)}}},[e._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.hideOrSub(1)}}},[e._v("确定")])],1)],1)],1)},b=[],g=(s("a15b"),s("ef6c")),w={name:"AddressDialog",data:function(){return{addressId:"",isShowDialog:!1,adderssList:{},options:g["regionData"],selectedOptions:["410000","410100","410102"],rules:{addressName:[{required:!0,message:"地址名称必填",trigger:"blur"}],name:[{required:!0,message:"收件人姓名必填",trigger:"blur"}],detailAddress:[{required:!0,message:"详细地址必填",trigger:"blur"}],postCode:[{required:!0,message:"邮政编码必填",trigger:"blur"}],phone:[{required:!0,message:"手机号必填",trigger:"blur"}]}}},created:function(){},mounted:function(){},methods:{getEditorAddress:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var s,r,a,o;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f(e.addressId);case 2:s=t.sent,r=s.success,a=s.message,o=s.data,r?(e.adderssList=o.address,e.selectedOptions=o.address.cityCode.split(",")):e.$message.error(a);case 5:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.adderssList=this.$options.data().adderssList,this.selectedOptions=this.$options.data().selectedOptions},openInfo:function(e){e&&(this.addressId=e,this.getEditorAddress()),this.isShowDialog=!0},handleClose:function(){this.isShowDialog=!1},handleCityChange:function(e){console.log(e),this.adderssList.cityCode=e.join(","),this.adderssList.province=g["CodeToText"][e[0]],this.adderssList.city=g["CodeToText"][e[1]],this.adderssList.region=g["CodeToText"][e[2]]},hideOrSub:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function s(){return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:e?t.$refs.addressForm.validate(function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(s){var r,a,o,i;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s){e.next=11;break}return r=null,r=t.addressId?m:p,e.next=5,r(t.adderssList);case 5:a=e.sent,o=a.success,i=a.message,o?(t.$message.success(i),t.$emit("refresh-data")):t.$message.error(i),t.isShowDialog=!1,e.next=12;break;case 11:t.$message.error("请检查校验");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):t.isShowDialog=!1;case 1:case"end":return s.stop()}}),s)})))()}}},v=w,O=s("2877"),j=Object(O["a"])(v,h,b,!1,null,"04033918",null),x=j.exports,L={name:"Address",components:{AddressDialog:x},data:function(){return{addressList:[]}},created:function(){this.getAddressList()},mounted:function(){},methods:{getAddressList:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var s,r,a,o;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:s=t.sent,r=s.success,a=s.message,o=s.data,r?e.addressList=o.items:e.$message.error(a);case 5:case"end":return t.stop()}}),t)})))()},setS:function(e,t){var s=this;return Object(o["a"])(Object(n["a"])().mark((function r(){var a,o;return Object(n["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1!=t){r.next=6;break}return r.next=3,d({id:e});case 3:a=r.sent,o=a.success,o?s.$message.success("更改成功"):s.$message.error("更改失败");case 6:s.getAddressList();case 7:case"end":return r.stop()}}),r)})))()},sentR:function(e,t){var s=this;return Object(o["a"])(Object(n["a"])().mark((function r(){var a,o;return Object(n["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1!=t){r.next=6;break}return r.next=3,l({id:e});case 3:a=r.sent,o=a.success,o?s.$message.success("更改成功"):s.$message.error("更改失败");case 6:s.getAddressList();case 7:case"end":return r.stop()}}),r)})))()},open:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(n["a"])().mark((function s(){var r,a,o;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,u(e);case 2:r=s.sent,a=r.success,o=r.message,a?(t.$message({type:"success",message:"删除成功!"}),t.getAddressList()):t.$message.error(o);case 5:case"end":return s.stop()}}),s)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},showDia:function(){this.$refs.addressDialog.openInfo()},EditorAddress:function(e){this.$refs.addressDialog.openInfo(e)}}},y=L,k=Object(O["a"])(y,r,a,!1,null,"2472865d",null);t["default"]=k.exports}}]);