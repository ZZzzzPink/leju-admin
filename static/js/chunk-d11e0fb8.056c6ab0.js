(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d11e0fb8"],{"0c6d":function(e,t,o){"use strict";o("d3b7");var s=o("bc3a"),r=o.n(s),i=o("5c96"),l=o("4360"),a=o("7859"),n=o("a18c"),c=r.a.create({baseURL:"http://leju.bufan.cloud",timeout:5e3});c.interceptors.request.use((function(e){return Object(a["a"])()&&(e.headers["token"]=Object(a["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),c.interceptors.response.use((function(e){var t=e.data;return 20002===t.code&&(Object(a["c"])(),Object(a["d"])(),n["a"].push("/login")),2e4!==t.code?(Object(i["Message"])({message:t.message||"Error",type:"error",duration:5e3}),50008!==t.code&&50012!==t.code&&50014!==t.code||i["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){l["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(i["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=c},"1b62":function(e,t,o){"use strict";var s=o("7859");t["a"]={data:function(){return{paganationObj:{start:1,limit:6,totla:0,pageSizes:[3,6,9,12]},uploadFileOss:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",uploadFileOssSave:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOssSave"}},computed:{token:function(){return{token:Object(s["a"])()}}}}},"273d":function(e,t,o){},2888:function(e,t,o){"use strict";o("4223")},4223:function(e,t,o){},6243:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"product-detail-main"},[o("el-steps",{attrs:{active:e.step,"finish-status":"success"}},[o("el-step",{attrs:{title:"步骤 1"}}),o("el-step",{attrs:{title:"步骤 2"}}),o("el-step",{attrs:{title:"步骤 3"}})],1),o("el-card",{staticClass:"m-30",attrs:{shadow:"always"}},[o("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[o("span",[e._v(e._s(1==e.step?"基本信息":"")+e._s(2==e.step?"商品sku信息":"")+e._s(3==e.step?"详情描述":""))])]),o("div",{directives:[{name:"show",rawName:"v-show",value:1==e.step,expression:"step == 1"}]},[o("el-form",{ref:"form",attrs:{model:e.product,"label-width":"100px",size:"normal"}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6,offset:0}},[o("el-form-item",{attrs:{label:"商品名称:"}},[o("el-input",{attrs:{placeholder:"商品名称",size:"normal",clearable:""},model:{value:e.product.name,callback:function(t){e.$set(e.product,"name",t)},expression:"product.name"}},[e._v("商品名称:")])],1)],1),o("el-col",{attrs:{span:6,offset:0}},[o("el-form-item",{attrs:{label:"商品编码:"}},[o("el-input",{attrs:{placeholder:"商品编码",size:"normal",clearable:""},model:{value:e.product.productSn,callback:function(t){e.$set(e.product,"productSn",t)},expression:"product.productSn"}})],1)],1),o("el-col",{attrs:{span:6,offset:0}},[o("el-form-item",{attrs:{label:"商品分类:"}},[o("el-select",{attrs:{placeholder:"商品分类",clearable:""},model:{value:e.product.productCategoryId,callback:function(t){e.$set(e.product,"productCategoryId",t)},expression:"product.productCategoryId"}},e._l(e.categoryList,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6,offset:0}},[o("el-form-item",{attrs:{label:"商品品牌:"}},[o("el-select",{attrs:{"value-key":"",placeholder:"商品品牌",clearable:"",filterable:""},model:{value:e.product.brandId,callback:function(t){e.$set(e.product,"brandId",t)},expression:"product.brandId"}},e._l(e.allBrand,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6,offset:0}},[o("el-form-item",{attrs:{label:"商品描述"}},[o("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"商品描述",clearable:""},model:{value:e.product.description,callback:function(t){e.$set(e.product,"description",t)},expression:"product.description"}})],1)],1)],1),o("h3",{staticStyle:{"font-weight":"normal"}},[e._v("商品属性")]),o("el-divider"),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8,offset:0}},[o("el-form-item",{attrs:{label:"商品原价:"}},[o("el-input-number",{attrs:{size:"mini",min:0,max:10,label:"描述文字"},model:{value:e.product.originalPrice,callback:function(t){e.$set(e.product,"originalPrice",t)},expression:"product.originalPrice"}})],1)],1),o("el-col",{attrs:{span:8,offset:0}},[o("el-form-item",{attrs:{label:"促销类型:"}},[o("el-select",{attrs:{size:"mini",disabled:!0,clearable:"",filterable:"",placeholder:"促销类型"},model:{value:e.product.promotionType,callback:function(t){e.$set(e.product,"promotionType",t)},expression:"product.promotionType"}},e._l(e.promotionTypeList,(function(e){return o("el-option",{key:e.value,attrs:{label:e.test,value:e.value}})})),1)],1)],1),o("el-col",{attrs:{span:8,offset:0}},[o("el-form-item",{attrs:{label:"活动价格:"}},[o("el-input-number",{attrs:{size:"mini",min:0,max:10,label:"描述文字"},model:{value:e.product.promotionPrice,callback:function(t){e.$set(e.product,"promotionPrice",t)},expression:"product.promotionPrice"}})],1)],1)],1),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8,offset:0}},[o("el-form-item",{attrs:{label:"重量(kg):"}},[o("el-input-number",{attrs:{size:"mini",min:0,max:10,label:"描述文字"},model:{value:e.product.weight,callback:function(t){e.$set(e.product,"weight",t)},expression:"product.weight"}})],1)],1)],1),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:10,offset:0}},[o("el-form-item",{attrs:{label:"审核状态:"}},[o("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.product.verifyStatus,callback:function(t){e.$set(e.product,"verifyStatus",t)},expression:"product.verifyStatus"}})],1)],1),o("el-col",{attrs:{span:10,offset:0}},[o("el-form-item",{attrs:{label:"是否上架:"}},[o("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.product.promotionType,callback:function(t){e.$set(e.product,"promotionType",t)},expression:"product.promotionType"}})],1)],1)],1),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12,offset:0}},[o("el-form-item",{attrs:{label:"缩略图"}},[o("el-upload",{ref:"productUpload",attrs:{action:e.uploadFileOss,headers:e.token,"on-success":e.handlePicSuccess,"before-upload":e.beforePicUpload}},[e.product.pic?o("img",{staticClass:"avatar",attrs:{src:e.product.pic}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),o("h3",{staticStyle:{"font-weight":"normal"}},[e._v("其他信息")]),o("el-divider"),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:10,offset:0}},[o("el-form-item",{attrs:{label:"推荐状态"}},[o("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.product.publishStatus,callback:function(t){e.$set(e.product,"publishStatus",t)},expression:"product.publishStatus"}})],1)],1),o("el-col",{attrs:{span:10,offset:0}},[o("el-form-item",{attrs:{label:"新品状态"}},[o("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.product.newStatus,callback:function(t){e.$set(e.product,"newStatus",t)},expression:"product.newStatus"}})],1)],1)],1),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6,offset:0}},[o("el-form-item",{attrs:{"label-width":"85px",label:"搜索关键词"}},[o("el-input",{attrs:{placeholder:"请输入关键词",size:"mini",clearable:""},model:{value:e.product.keywords,callback:function(t){e.$set(e.product,"keywords",t)},expression:"product.keywords"}},[e._v("ddd")])],1)],1),o("el-col",{attrs:{span:12,offset:4}},[o("el-form-item",{attrs:{label:"库存预警"}},[o("el-input-number",{attrs:{size:"mini",min:0,max:10,step:1,controls:!0,"controls-position":"both"},model:{value:e.product.lowStock,callback:function(t){e.$set(e.product,"lowStock",t)},expression:"product.lowStock"}})],1)],1)],1),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12,offset:0}},[o("el-form-item",{attrs:{label:"产品服务"}},[o("el-checkbox-group",{ref:"checkBox",model:{value:e.product.serviceIds,callback:function(t){e.$set(e.product,"serviceIds",t)},expression:"product.serviceIds"}},[o("el-checkbox",{attrs:{label:"0"}},[e._v(e._s("无忧退货"))]),o("el-checkbox",{attrs:{label:"1"}},[e._v(e._s("快速退款"))]),o("el-checkbox",{attrs:{label:"2"}},[e._v(e._s("免费包邮"))])],1)],1)],1)],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:2==e.step,expression:"step == 2"}]},[o("el-form",{ref:"pmsSkuStockListForm",attrs:{model:e.pmsSkuStockList,"label-width":"80px",size:"normal"}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6,offset:0}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{attrs:{size:"mini"},model:{value:e.product.detailTitle,callback:function(t){e.$set(e.product,"detailTitle",t)},expression:"product.detailTitle"}})],1)],1),o("el-col",{attrs:{span:12,offset:0}},[o("el-form-item",{attrs:{label:"副标题"}},[o("el-input",{attrs:{size:"mini"},model:{value:e.product.subTitle,callback:function(t){e.$set(e.product,"subTitle",t)},expression:"product.subTitle"}})],1)],1)],1),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:24,offset:0}},[o("el-form-item",{attrs:{label:"画册"}},[o("el-upload",{ref:"albumPicsUploadCom",attrs:{action:e.uploadFileOss,headers:e.token,"list-type":"picture-card","on-success":e.albumPicsUploadSucc,"before-upload":e.albumPicsUploadBefore,"file-list":e.uploadFiles},scopedSlots:e._u([{key:"file",fn:function(t){var s=t.file;return o("div",{},[o("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:s.url,alt:""}}),o("span",{staticClass:"el-upload-list__item-actions"},[o("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(s)}}},[o("i",{staticClass:"el-icon-zoom-in"})]),e.disabled?e._e():o("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleDownload(s)}}},[o("i",{staticClass:"el-icon-download"})]),e.disabled?e._e():o("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(s)}}},[o("i",{staticClass:"el-icon-delete"})])])])}}])},[o("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),o("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)],1),o("el-row",{attrs:{gutter:0}},[o("el-col",{attrs:{span:24,offset:0}},[o("el-form-item",{attrs:{label:"sku设置"}},[e.colorSkuTemp.tempArr.length>0?o("div",[o("span",[e._v("颜色：")]),o("el-checkbox-group",{staticStyle:{display:"inline-block"},model:{value:e.colorSkuTemp.selectedArr,callback:function(t){e.$set(e.colorSkuTemp,"selectedArr",t)},expression:"colorSkuTemp.selectedArr"}},e._l(e.colorSkuTemp.tempArr,(function(e){return o("el-checkbox",{key:e,attrs:{label:e}})})),1)],1):e._e(),e.sizeSkuTemp.tempArr.length>0?o("div",[o("span",[e._v("大小：")]),o("el-checkbox-group",{staticStyle:{display:"inline-block"},model:{value:e.sizeSkuTemp.selectedArr,callback:function(t){e.$set(e.sizeSkuTemp,"selectedArr",t)},expression:"sizeSkuTemp.selectedArr"}},e._l(e.sizeSkuTemp.tempArr,(function(e){return o("el-checkbox",{key:e,attrs:{label:e}})})),1)],1):e._e(),o("div",[o("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"颜色描述：比如土豪金",clearable:""},model:{value:e.colorSkuTemp.text,callback:function(t){e.$set(e.colorSkuTemp,"text",t)},expression:"colorSkuTemp.text"}}),o("el-button",{staticStyle:{"margin-right":"50px"},attrs:{plain:"",type:"default",size:"small"},on:{click:function(t){return e.createOptions("color")}}},[e._v("创建颜色选项")]),o("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"大小：比如128g",clearable:""},model:{value:e.sizeSkuTemp.text,callback:function(t){e.$set(e.sizeSkuTemp,"text",t)},expression:"sizeSkuTemp.text"}}),o("el-button",{attrs:{plain:"",type:"default",size:"small"},on:{click:function(t){return e.createOptions("size")}}},[e._v("创建大小选项")]),o("el-button",{staticStyle:{"margin-left":"200px"},attrs:{type:"primary",size:"small"},on:{click:e.createSkuList}},[e._v("生成SKU列表")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createSkuList}},[e._v("新增SKU列表")])],1)]),o("el-table",{directives:[{name:"show",rawName:"v-show",value:e.skuList.length>0,expression:"skuList.length > 0"}],attrs:{data:e.skuList,border:"",stripe:""}},[o("el-table-column",{attrs:{align:"center",type:"index",label:"#"}}),o("el-table-column",{attrs:{width:"200",align:"center",label:"图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-upload",{ref:"upload_"+t.row.tempId,attrs:{"show-file-list":!1,action:e.uploadFileOss,headers:e.token,"on-success":e.skuImgUploadSucc},nativeOn:{click:function(o){return e.skuUploadImg(t.row.tempId)}}},[t.row.pic?o("img",{attrs:{width:"70",height:"70",src:t.row.pic}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon2",staticStyle:{width:"100%",height:"100%"}})])]}}])}),o("el-table-column",{attrs:{width:"200",align:"center",label:"颜色"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"颜色",size:"mini"},model:{value:t.row.color,callback:function(o){e.$set(t.row,"color",o)},expression:"scope.row.color"}})]}}])}),o("el-table-column",{attrs:{label:"大小",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",clearable:""},model:{value:t.row.size,callback:function(o){e.$set(t.row,"size",o)},expression:"scope.row.size"}})]}}])}),o("el-table-column",{attrs:{label:"库存",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",clearable:""},model:{value:t.row.stock,callback:function(o){e.$set(t.row,"stock",o)},expression:"scope.row.stock"}})]}}])}),o("el-table-column",{attrs:{label:"预警库存",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",clearable:""},model:{value:t.row.lowStock,callback:function(o){e.$set(t.row,"lowStock",o)},expression:"scope.row.lowStock"}})]}}])}),o("el-table-column",{attrs:{label:"锁定库存",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",clearable:""},model:{value:t.row.lockStock,callback:function(o){e.$set(t.row,"lockStock",o)},expression:"scope.row.lockStock"}})]}}])}),o("el-table-column",{attrs:{label:"sku编码",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",clearable:""},model:{value:t.row.skuCode,callback:function(o){e.$set(t.row,"skuCode",o)},expression:"scope.row.skuCode"}})]}}])}),o("el-table-column",{attrs:{label:"价格",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",clearable:""},model:{value:t.row.price,callback:function(o){e.$set(t.row,"price",o)},expression:"scope.row.price"}})]}}])}),o("el-table-column",{attrs:{label:"销量",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",clearable:""},model:{value:t.row.sale,callback:function(o){e.$set(t.row,"sale",o)},expression:"scope.row.sale"}})]}}])}),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"}},[[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"mini"}},[e._v("删除")])]],2)],1)],1)],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:3==e.step,expression:"step == 3"}]},[o("el-form",{ref:"aaa",attrs:{model:e.product,size:"normal"}},[o("el-row",{attrs:{gutter:0}},[o("el-col",{attrs:{span:2,offset:0}},[e._v(" 商品详情: ")]),o("el-col",{attrs:{span:21,offset:0}},[o("el-form-item",[o("Tinymce",{model:{value:e.product.detailMobileHtml,callback:function(t){e.$set(e.product,"detailMobileHtml",t)},expression:"product.detailMobileHtml"}})],1)],1)],1),o("el-row",{attrs:{gutter:0}},[o("el-col",{attrs:{span:2,offset:0}},[e._v(" 备注: ")]),o("el-col",{attrs:{span:21,offset:0}},[o("el-form-item",[o("el-input",{attrs:{size:"mini",placeholder:"请输入备注"},model:{value:e.product.note,callback:function(t){e.$set(e.product,"note",t)},expression:"product.note"}})],1)],1)],1)],1)],1),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:10,offset:8}},[e.step>1?o("el-button",{attrs:{size:"mini"},on:{click:e.pre}},[e._v("返回上一步")]):e._e(),e.step<3?o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.next}},[e._v(e._s(1==e.step?"下一步,填写库存信息":"")+e._s(2==e.step?"下一步,填写移动端详情":""))]):e._e(),3==e.step?o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.doSaveProduct}},[e._v("提交")]):e._e()],1)],1)],1)],1)},r=[],i=o("5530"),l=o("c7eb"),a=o("1da1"),n=(o("d3b7"),o("159b"),o("7db0"),o("b0c0"),o("4de4"),o("e9c4"),o("fb6a"),o("8256"));const c="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var u={randomUUID:c};let d;const p=new Uint8Array(16);function m(){if(!d&&(d="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!d))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(p)}const f=[];for(let T=0;T<256;++T)f.push((T+256).toString(16).slice(1));function b(e,t=0){return(f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]).toLowerCase()}function h(e,t,o){if(u.randomUUID&&!t&&!e)return u.randomUUID();e=e||{};const s=e.random||(e.rng||m)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){o=o||0;for(let e=0;e<16;++e)t[o+e]=s[e];return t}return b(s)}var g=h,k=o("0c6d");function v(){return Object(k["a"])({url:"/lejuAdmin/category/getAllCategory"})}function w(e){return Object(k["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"post",data:e})}function y(e){return Object(k["a"])({url:"/lejuAdmin/product/productSkusDetail/".concat(e)})}var S=o("b488"),x=o("1b62"),_={name:"AddProduct",mixins:[x["a"]],components:{Tinymce:n["a"]},data:function(){return{step:1,product:{originalPrice:0,weight:0,promotionPrice:0,pic:"",lowStock:0,sale:"",serviceIds:[],albumPics:[]},pmsSkuStockList:{},categoryList:[],allBrand:[],promotionTypeList:[{value:0,test:"没有促销使用原价"},{value:1,test:"使用促销价"},{value:2,test:"使用会员价"},{value:3,test:"使用阶梯价格"},{value:4,test:"使用满减价格"},{value:5,test:"限时购"}],dialogImageUrl:"",dialogVisible:!1,disabled:!1,uploadFiles:[],colorSkuTemp:{text:"",selectedArr:[],tempArr:[]},sizeSkuTemp:{text:"",selectedArr:[],tempArr:[]},skuList:[]}},created:function(){this.$route.params.id?(this.productId=this.$route.params.id,this.getProductDetail()):(this.getCategroyList(),this.getAllBrandList())},methods:{getProductDetail:function(){var e=this;return Object(a["a"])(Object(l["a"])().mark((function t(){var o,s,r,i,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y(e.productId);case 2:o=t.sent,s=o.success,r=o.message,i=o.data,s?(e.product=i.product,e.skuList=i.skus,console.log("%c [ data ]-689","font-size:13px; background:pink; color:#bf2c9f;",i),e.product.albumPics.split(",").forEach((function(t){e.uploadFiles.push({name:g(),url:t})})),a=e.product.serviceIds.split(","),e.product.serviceIds=a):e.$message.error(r);case 5:case"end":return t.stop()}}),t)})))()},getCategroyList:function(){var e=this;return Object(a["a"])(Object(l["a"])().mark((function t(){var o,s,r,i,a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:o=t.sent,console.log("%c [ res ]-77","font-size:13px; background:pink; color:#bf2c9f;",o),s=o.success,r=o.message,i=o.data,a=i.items.find((function(e){return"乐居"===e.category.name})),s?e.categoryList=a.children:e.$message.error(r);case 7:case"end":return t.stop()}}),t)})))()},getAllBrandList:function(){var e=this;return Object(a["a"])(Object(l["a"])().mark((function t(){var o,s,r,i;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(S["a"])();case 2:o=t.sent,console.log("%c [ res ]-119","font-size:13px; background:pink; color:#bf2c9f;",o),s=o.success,r=o.message,i=o.data,s?e.allBrand=i.items:e.$message.error(r);case 6:case"end":return t.stop()}}),t)})))()},handlePicSuccess:function(e){console.log("%c [ res ]-300","font-size:13px; background:pink; color:#bf2c9f;",e);var t=e.success,o=e.message,s=e.data;t?(this.product.pic=s.fileUrl,console.log("%c [ this.product.pic ]-304","font-size:13px; background:pink; color:#bf2c9f;",this.product.pic),this.$refs.productUpload.clearFiles()):this.$message.error(o)},beforePicUpload:function(e){return!0},next:function(){this.step<3?this.step++:console.log(22)},pre:function(){this.step--},albumPicsUploadSucc:function(e){var t=e.success,o=e.message,s=e.data;t?this.product.albumPics.push(s.fileUrl):this.$message.error(o),console.log("%c [ succ ]-498","font-size:13px; background:pink; color:#bf2c9f;",e)},albumPicsUploadBefore:function(e){return console.log(222,this.uploadFiles),console.log("%c [ befor ]-520","font-size:13px; background:pink; color:#bf2c9f;",e),5!=this.product.albumPics.length||(this.$message.error("最多上传五张图片"),!1)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleDownload:function(){this.$message.error("暂不提供下载功能")},handleRemove:function(e){if(this.uploadFiles=this.$refs.albumPicsUploadCom.uploadFiles,this.uploadFiles=this.uploadFiles.filter((function(t){return t.uid!==e.uid})),e){var t=e.response.data.fileUrl;this.product.albumPics=this.product.albumPics.filter((function(e){return e!==t}))}},createOptions:function(e){var t=this;if("color"==e){console.log(this.colorSkuTemp.text);var o=this.colorSkuTemp.tempArr.find((function(e){return e==t.colorSkuTemp.text}));o?(this.$message.error("不能重复,请重新输入"),this.colorSkuTemp.text=""):(this.colorSkuTemp.tempArr.push(this.colorSkuTemp.text),this.colorSkuTemp.text="")}else if("size"==e){var s=this.sizeSkuTemp.tempArr.find((function(e){return e==t.sizeSkuTemp.text}));s?(this.$message.error("不能重复,请重新输入"),this.sizeSkuTemp.text=""):(this.sizeSkuTemp.tempArr.push(this.sizeSkuTemp.text),this.sizeSkuTemp.text="")}},delSku:function(e,t){console.log(e)},createSkuList:function(){if(this.skuList.length){var e=this.skuList.length-1;console.log(e);var t=this.skuList[e];this.skuList.push(Object(i["a"])({},t))}else for(var o=0;o<this.colorSkuTemp.selectedArr.length;o++)for(var s=0;s<this.sizeSkuTemp.selectedArr.length;s++)this.skuList.push({tempId:g(),lockStock:0,lowStock:0,pic:"",price:0,promotionPrice:0,sale:0,skuCode:"",stock:0,size:this.sizeSkuTemp.selectedArr[s],color:this.colorSkuTemp.selectedArr[o]})},skuImgUploadSucc:function(e){var t=this,o=e.success,s=e.message,r=e.data;if(o){var i=this.skuList.find((function(e){return e.tempId==t.tempId}));i.pic=r.fileUrl,this.$refs["upload_"+this.tempId].clearFiles(),this.tempId=""}else this.$message.error(s)},skuUploadImg:function(e){this.tempId=e},doSaveProduct:function(){var e=this;return Object(a["a"])(Object(l["a"])().mark((function t(){var o,s,r,a,n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=[],e.skuList.forEach((function(e){o.push(Object(i["a"])(Object(i["a"])({},e),{},{spData:JSON.stringify([{key:"颜色",value:e.color},{key:"大小",value:e.size}])}))})),console.log(111),console.log("%c [ this.product.serviceIds ]-901","font-size:13px; background:pink; color:#bf2c9f;",e.product.serviceIds),e.product.serviceIds&&(s="",e.product.serviceIds.forEach((function(e,t){e&&(s+=t+",")})),e.product.serviceIds=s.slice(0,s.length-1)),e.product.albumPics&&(r="",e.product.albumPics.forEach((function(e){r+=e+","})),e.product.albumPics=r.slice(0,r.length-1)),e.product,console.log("%c [ this.product ]-932","font-size:13px; background:pink; color:#bf2c9f;",e.product),e.skuList,console.log("%c [ this.skuList ]-935","font-size:13px; background:pink; color:#bf2c9f;",e.skuList),a={pmsSkuStockList:o,product:e.product},t.next=13,w(a);case 13:n=t.sent,console.log("%c [ res ]-932","font-size:13px; background:pink; color:#bf2c9f;",n);case 15:case"end":return t.stop()}}),t)})))()}}},j=_,z=(o("7cd8"),o("2877")),O=Object(z["a"])(j,s,r,!1,null,"e4484e60",null);t["default"]=O.exports},"7cd8":function(e,t,o){"use strict";o("273d")},"7db0":function(e,t,o){"use strict";var s=o("23e7"),r=o("b727").find,i=o("44d2"),l=o("ae40"),a="find",n=!0,c=l(a);a in[]&&Array(1)[a]((function(){n=!1})),s({target:"Array",proto:!0,forced:n||!c},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i(a)},8256:function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[o("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}})])},r=[],i=(o("b680"),o("a9e3"),o("ac1f"),o("00b4"),o("d3b7"),o("159b"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"upload-container"},[o("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" upload ")]),o("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v(" Click upload ")])],1),o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" Cancel ")]),o("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" Confirm ")])],1)],1)}),l=[],a=(o("b64b"),o("d81d"),o("3ca3"),o("ddb0"),o("2b3d"),o("9861"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every((function(t){return e.listObj[t].hasSuccess}))},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map((function(t){return e.listObj[t]}));this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(e,t){for(var o=t.uid,s=Object.keys(this.listObj),r=0,i=s.length;r<i;r++)if(this.listObj[s[r]].uid===o)return this.listObj[s[r]].url=e.files.file,void(this.listObj[s[r]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,o=Object.keys(this.listObj),s=0,r=o.length;s<r;s++)if(this.listObj[o[s]].uid===t)return void delete this.listObj[o[s]]},beforeUpload:function(e){var t=this,o=window.URL||window.webkitURL,s=e.uid;return this.listObj[s]={},new Promise((function(r,i){var l=new Image;l.src=o.createObjectURL(e),l.onload=function(){t.listObj[s]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},r(!0)}))}}}),n=a,c=(o("2888"),o("2877")),u=Object(c["a"])(n,i,l,!1,null,"3dae379b",null),d=u.exports,p=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],m=p,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],b=f,h=o("b85c"),g=[];function k(){return window.tinymce}var v=function(e,t){var o=document.getElementById(e),s=t||function(){};if(!o){var r=document.createElement("script");r.src=e,r.id=e,document.body.appendChild(r),g.push(s);var i="onload"in r?l:a;i(r)}function l(t){t.onload=function(){this.onerror=this.onload=null;var e,o=Object(h["a"])(g);try{for(o.s();!(e=o.n()).done;){var s=e.value;s(null,t)}}catch(r){o.e(r)}finally{o.f()}g=null},t.onerror=function(){this.onerror=this.onload=null,s(new Error("Failed to load "+e),t)}}function a(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t,o=Object(h["a"])(g);try{for(o.s();!(t=o.n()).done;){var s=t.value;s(null,e)}}catch(r){o.e(r)}finally{o.f()}g=null}}}o&&s&&(k()?s(null,o):g.push(s))},w=v,y=o("1b62"),S=o("bc3a"),x=o.n(S),_="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",j={name:"Tinymce",components:{editorImage:d},mixins:[y["a"]],props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?"".concat(e,"px"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;w(_,(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:b,menubar:this.menubar,plugins:m,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(o){t.value&&o.setContent(t.value),t.hasInit=!0,o.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",o.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))},convert_urls:!1,images_upload_handler:function(e,o,s,r){r(0);var i=new FormData;i.append("file",e.blob()),x.a.post(t.uploadFileOss,i,{headers:t.token}).then((function(e){var s=e.data,i=s.success,l=s.data,a=s.message;i?(o(l.fileUrl),r(100)):t.$message.error(a)}))}})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach((function(e){return window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'.concat(e.url,'" >'))}))}}},z=j,O=(o("b57c"),Object(c["a"])(z,s,r,!1,null,"3a84adc7",null));t["a"]=O.exports},b488:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"c",(function(){return i})),o.d(t,"d",(function(){return l})),o.d(t,"f",(function(){return a})),o.d(t,"e",(function(){return n})),o.d(t,"g",(function(){return c})),o.d(t,"b",(function(){return u}));o("99af");var s=o("0c6d");function r(){return Object(s["a"])({url:"/lejuAdmin/brand/findAllBrand"})}function i(e,t,o){return Object(s["a"])({url:"/lejuAdmin/product/productsByPage/".concat(e,"/").concat(t),method:"post",data:o})}function l(e){return Object(s["a"])({url:"/lejuAdmin/product/switchNewStatus",method:"post",data:e})}function a(e){return Object(s["a"])({url:"/lejuAdmin/product/switchRecommandStatus",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/lejuAdmin/product/switchPublishStatus",method:"post",data:e})}function c(e){return Object(s["a"])({url:"/lejuAdmin/product/switchVerifyStatus",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/lejuAdmin/sku/getSkusByProductId/".concat(e)})}},b57c:function(e,t,o){"use strict";o("ba15")},ba15:function(e,t,o){}}]);